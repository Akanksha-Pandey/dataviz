```{r echo = FALSE, message = FALSE}
# run setup script
source("_common.R")
```

# Visualizing data: mapping data onto aesthetics

## Geometric objects

Introduce basic data types, with table showing examples:

- numerical continuous
- numerical discrete
- categorical
- ordered factor
- date/time
- text

Table: (\#tab:basic-data-types) Types of data. **Table and caption need work.**

--------------------------------------------------------------------------------------------------------------------
Type of variable         Examples              Appropriate scale       Description
------------------------ --------------------- ----------------------- ---------------------------------------------
quantitative/numerical   1.3, 5.7, 83,         continuous              Numbers.
continuous               1.5x10^-2^
 
quantitative/numerical   1, 2, 3, 4            discrete                Also numbers.
discrete
 
qualitative/categorical  dog, cat, fish        discrete                Categories without order. These variables are
                                                                       also called *factors*.
                                                                       
qualitative ordered      good, fair, poor      discrete                Categories with order. These variables are
                                                                       also called *ordered factors*.

date or time             Jan. 5 2018, 8:03am   continuous or discrete  Specific days and/or times or
                                                                       generics (May 1st, Dec. 25)

text                     The quick brown fox   none, or discrete       Free-form text. Can be treated
                         jumps over the lazy                           as categorical if needed.
                         dog.
--------------------------------------------------------------------------------------------------------------------


Discuss how all of these can be mapped onto any type of scale. To map categorical data onto position scales, we count them and use the counts.

Show first few lines of temperature table and explain month, day, temperature, city, weather station?

## Scales

Provide an example of a figure with 4-5 scales, including x, y, color, shape, size

(ref:mtcars-five-scale) Fuel efficiency versus displacement, for 32 cars (1973--74 models). This figure uses five separate scales to represent data: (i) the *x* axis (displacement); (ii) the *y* axis (fuel efficiency); (iii) the color of the data points (power); (iv) the size of the data points (weight); and (v) the shape of the data points (number of cylinders). Four of the five variables displayed (displacement, fuel efficiency, power, and weight) are numerical continuous. The remaining one (number of cylinders) can be considered to be either numerical discrete or qualitative ordered.

```{r mtcars-five-scale, fig.width = 7.5, fig.cap = '(ref:mtcars-five-scale)'}
ggplot(mtcars, aes(disp, mpg, fill = hp, shape = factor(cyl), size = wt)) + 
  geom_point(color = "white") +
  scale_shape_manual(values = c(23, 24, 21), name = "cylinders") +
  scale_fill_continuous_carto(palette = "Emrld", name = "power (hp)", breaks = c(100, 200, 300)) +
  xlab("displacement (cu. in.)") +
  ylab("fuel efficiency (mpg)") +
  guides(shape = guide_legend(override.aes = list(size = 4, fill = "#329D84")),
         size = guide_legend(override.aes = list(shape = 21, fill = "#329D84"),
                             title = "weight (1000 lbs)")) +
  theme_half_open() + background_grid() +
  theme(legend.title.align = 0.5)
```
```{r fig.asp = .45}
mean_temps <- filter(ncdc_normals,
                station_id %in% c(
                  "USW00014819", # Chicago, IL 60638
                  #"USC00516128", # Honolulu, HI 96813
                  #"USW00027502", # Barrow, AK 99723, coldest point in the US
                  "USC00042319", # Death Valley, CA 92328 hottest point in the US
                  "USW00093107", # San Diego, CA 92145
                  #"USC00427606"  # Salt Lake City, UT 84103
                  "USW00012918" # Houston, TX 77061
                )) %>%
  mutate(location = fct_recode(factor(station_id),
                               "Chicago, IL" = "USW00014819",
                               #"Honolulu, HI" = "USC00516128",
                               #"Barrow, AK" = "USW00027502",
                               "Death Valley, CA" = "USC00042319",
                               "San Diego, CA" = "USW00093107",
                               #"Salt Lake City, UT" = "USC00427606",
                               "Houston, TX" = "USW00012918")) %>%
  group_by(location, month) %>%
  summarize(mean = mean(temperature)) %>%
  mutate(location = factor(location, levels = c()))

ggplot(mean_temps, aes(x = month, y = location, fill = mean)) + 
  geom_tile(width = .95, height = 0.95) + 
  scale_fill_viridis_c(option = "B", begin = 0.15, end = 0.98) + 
  coord_fixed(expand = FALSE) +
  theme_half_open() +
  theme(axis.line = element_blank())
```

```{r}
titanic_groups <- titanic_all %>% filter(class != "*") %>% select(class, sex) %>% group_by(class, sex) %>% tally()

ggplot(titanic_groups, aes(x=class, y=n, fill=sex)) +geom_col(position="stack", color = "white", size = 2, width = 1)
```
