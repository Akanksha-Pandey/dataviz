<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Fundamentals of data visualization</title>
  <meta name="description" content="A guide for making figures that look professional and are publication-ready.">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="Fundamentals of data visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A guide for making figures that look professional and are publication-ready." />
  <meta name="github-repo" content="clauswilke/dataviz" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Fundamentals of data visualization" />
  
  <meta name="twitter:description" content="A guide for making figures that look professional and are publication-ready." />
  

<meta name="author" content="Claus O. Wilke">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="proportional-ink.html">
<link rel="next" href="directory-of-visualizations.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#thoughts-on-graphing-software-and-figure-preparation-pipelines"><i class="fa fa-check"></i>Thoughts on graphing software and figure-preparation pipelines</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#good-bad-and-ugly-figures"><i class="fa fa-check"></i>Good, bad, and ugly figures</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>Part I: General principles of figure design</b></span></li>
<li class="chapter" data-level="1" data-path="visualizing-data-mapping-data-onto-aesthetics.html"><a href="visualizing-data-mapping-data-onto-aesthetics.html"><i class="fa fa-check"></i><b>1</b> Visualizing data: mapping data onto aesthetics</a></li>
<li class="chapter" data-level="2" data-path="choosing-colorblind-friendly-color-scales.html"><a href="choosing-colorblind-friendly-color-scales.html"><i class="fa fa-check"></i><b>2</b> Choosing colorblind-friendly color scales</a><ul>
<li class="chapter" data-level="2.1" data-path="choosing-colorblind-friendly-color-scales.html"><a href="choosing-colorblind-friendly-color-scales.html#qualitative-color-scales"><i class="fa fa-check"></i><b>2.1</b> Qualitative color scales</a></li>
<li class="chapter" data-level="2.2" data-path="choosing-colorblind-friendly-color-scales.html"><a href="choosing-colorblind-friendly-color-scales.html#directional-color-scales"><i class="fa fa-check"></i><b>2.2</b> Directional color scales</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="redundant-coding.html"><a href="redundant-coding.html"><i class="fa fa-check"></i><b>3</b> Redundant coding</a></li>
<li class="chapter" data-level="4" data-path="small-axis-labels.html"><a href="small-axis-labels.html"><i class="fa fa-check"></i><b>4</b> Your axis labels are too small</a></li>
<li class="chapter" data-level="5" data-path="background-grids.html"><a href="background-grids.html"><i class="fa fa-check"></i><b>5</b> Background grids</a></li>
<li class="chapter" data-level="6" data-path="avoid-line-drawings.html"><a href="avoid-line-drawings.html"><i class="fa fa-check"></i><b>6</b> Avoid line drawings</a></li>
<li class="chapter" data-level="7" data-path="proportional-ink.html"><a href="proportional-ink.html"><i class="fa fa-check"></i><b>7</b> The principle of proportional ink</a></li>
<li class="chapter" data-level="8" data-path="overlapping-points.html"><a href="overlapping-points.html"><i class="fa fa-check"></i><b>8</b> Handling overlapping points</a><ul>
<li class="chapter" data-level="8.1" data-path="overlapping-points.html"><a href="overlapping-points.html#partial-transparency"><i class="fa fa-check"></i><b>8.1</b> Partial transparency</a></li>
<li class="chapter" data-level="8.2" data-path="overlapping-points.html"><a href="overlapping-points.html#jittering"><i class="fa fa-check"></i><b>8.2</b> Jittering</a></li>
<li class="chapter" data-level="8.3" data-path="overlapping-points.html"><a href="overlapping-points.html#contour-lines"><i class="fa fa-check"></i><b>8.3</b> Contour lines</a></li>
<li class="chapter" data-level="8.4" data-path="overlapping-points.html"><a href="overlapping-points.html#d-histograms"><i class="fa fa-check"></i><b>8.4</b> 2d histograms</a></li>
</ul></li>
<li class="part"><span><b>Part II: A visualization for every occasion</b></span></li>
<li class="chapter" data-level="9" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html"><i class="fa fa-check"></i><b>9</b> Directory of visualizations</a><ul>
<li class="chapter" data-level="9.1" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#individual-distributions"><i class="fa fa-check"></i><b>9.1</b> Individual distributions</a></li>
<li class="chapter" data-level="9.2" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#multiple-distributions"><i class="fa fa-check"></i><b>9.2</b> Multiple distributions</a></li>
<li class="chapter" data-level="9.3" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#proportions"><i class="fa fa-check"></i><b>9.3</b> Proportions</a></li>
<li class="chapter" data-level="9.4" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#other"><i class="fa fa-check"></i><b>9.4</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="histograms-density-plots.html"><a href="histograms-density-plots.html"><i class="fa fa-check"></i><b>10</b> Visualizing distributions: Histograms and density plots</a><ul>
<li class="chapter" data-level="10.1" data-path="histograms-density-plots.html"><a href="histograms-density-plots.html#visualizing-a-single-distribution"><i class="fa fa-check"></i><b>10.1</b> Visualizing a single distribution</a></li>
<li class="chapter" data-level="10.2" data-path="histograms-density-plots.html"><a href="histograms-density-plots.html#visualizing-multiple-distributions-at-the-same-time"><i class="fa fa-check"></i><b>10.2</b> Visualizing multiple distributions at the same time</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ecdf-qq.html"><a href="ecdf-qq.html"><i class="fa fa-check"></i><b>11</b> Visualizing distributions: Empirical cumulative density functions and q-q plots</a><ul>
<li class="chapter" data-level="11.1" data-path="ecdf-qq.html"><a href="ecdf-qq.html#empirical-cumulative-density-functions"><i class="fa fa-check"></i><b>11.1</b> Empirical cumulative density functions</a></li>
<li class="chapter" data-level="11.2" data-path="ecdf-qq.html"><a href="ecdf-qq.html#skewed-distributions"><i class="fa fa-check"></i><b>11.2</b> Highly skewed distributions</a></li>
<li class="chapter" data-level="11.3" data-path="ecdf-qq.html"><a href="ecdf-qq.html#qq-plots"><i class="fa fa-check"></i><b>11.3</b> Quantile–quantile plots</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="boxplots-violins.html"><a href="boxplots-violins.html"><i class="fa fa-check"></i><b>12</b> Boxplots, violin plots, and more</a></li>
<li class="part"><span><b>Part III: Miscellaneous topics</b></span></li>
<li class="chapter" data-level="13" data-path="understanding-the-most-commonly-used-image-file-formats.html"><a href="understanding-the-most-commonly-used-image-file-formats.html"><i class="fa fa-check"></i><b>13</b> Understanding the most commonly used image file formats</a><ul>
<li class="chapter" data-level="13.1" data-path="understanding-the-most-commonly-used-image-file-formats.html"><a href="understanding-the-most-commonly-used-image-file-formats.html#bitmap-and-vector-graphics"><i class="fa fa-check"></i><b>13.1</b> Bitmap and vector graphics</a></li>
<li class="chapter" data-level="13.2" data-path="understanding-the-most-commonly-used-image-file-formats.html"><a href="understanding-the-most-commonly-used-image-file-formats.html#lossless-and-lossy-compression-of-bitmap-graphics"><i class="fa fa-check"></i><b>13.2</b> Lossless and lossy compression of bitmap graphics</a></li>
<li class="chapter" data-level="13.3" data-path="understanding-the-most-commonly-used-image-file-formats.html"><a href="understanding-the-most-commonly-used-image-file-formats.html#converting-between-image-formats"><i class="fa fa-check"></i><b>13.3</b> Converting between image formats</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i><b>14</b> Notes</a><ul>
<li class="chapter" data-level="14.1" data-path="notes.html"><a href="notes.html#outline"><i class="fa fa-check"></i><b>14.1</b> Outline</a><ul>
<li class="chapter" data-level="" data-path="notes.html"><a href="notes.html#part-i-general-principles-of-figure-design"><i class="fa fa-check"></i>Part I: General principles of figure design</a></li>
<li class="chapter" data-level="" data-path="notes.html"><a href="notes.html#part-ii-a-visualization-for-every-occasion"><i class="fa fa-check"></i>Part II: A visualization for every occasion</a></li>
<li class="chapter" data-level="" data-path="notes.html"><a href="notes.html#part-iii-miscellaneous-topics"><i class="fa fa-check"></i>Part III: Miscellaneous topics</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="notes.html"><a href="notes.html#other-notes-and-comments"><i class="fa fa-check"></i><b>14.2</b> Other notes and comments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Fundamentals of data visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="overlapping-points" class="section level1">
<h1><span class="header-section-number">8</span> Handling overlapping points</h1>
<p>When we want to visualize large or very large datasets, we often experience the challenge that simple x–y scatter plots do not work very well because many points lie on top of each other and partially or fully overlap. And similar problems can arise even in small datasets if values were recorded with low precision or rounded, such that multiple observations have exactly the same numeric values. The technical term commonly used to describe this situation is “overplotting”, i.e., plotting many points on top of each other. Below, I describe several strategies you can pursue when you encounter this challenge.</p>
<div id="partial-transparency" class="section level2">
<h2><span class="header-section-number">8.1</span> Partial transparency</h2>
<p>Let’s revisit the fuel economy figure from Chapter <a href="small-axis-labels.html#small-axis-labels">4</a> and focus on an aspect we ignored there: <img src="overlapping_points_files/figure-html/mpg-cty-displ-solid-1.png" width="576" style="display: block; margin: auto;" /> I have labeled this figure “bad” here because the points overlap and partly obscure each other. A simple way to ameliorate this issue is to use partial transparency: <img src="overlapping_points_files/figure-html/mpg-cty-displ-transp-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="jittering" class="section level2">
<h2><span class="header-section-number">8.2</span> Jittering</h2>
<p>Making points partially transparent is not always sufficient. For example, the same dataset contains fuel economy for both city and highway driving. If we plot those two quantities against each other, we obtain the following figure. <img src="overlapping_points_files/figure-html/mpg-cty-hwy-transp-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Because fuel economy is rounded to whole integers in this dataset, many points lie exactly on top of each other. While these fully overlapping points appear darker in the plot, the visual appearance is that of one darker point rather than of a set of points plotted in the same location. We can emphasize the number of points in the same locations by applying a small amount of jitter, i.e., displacing each point randomly by a small amount.</p>
<p><img src="overlapping_points_files/figure-html/mpg-cty-hwy-jitter-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>However, when jittering we have to make sure not to overdo it. If we jitter too much, we end up placing points in locations that are not representative of the underlying dataset and hence are creating a misleading visualization of the data. <img src="overlapping_points_files/figure-html/mpg-cty-hwy-jitter-extreme-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>For example, in this particular case the extreme jittering creates the impression that for some cars the highway economy can fall below the city economy. However, such cases do not exist in the original dataset.</p>
</div>
<div id="contour-lines" class="section level2">
<h2><span class="header-section-number">8.3</span> Contour lines</h2>
<p>When the number of points grows large, it can be helpful to indicate the point density, for example with contour lines. This technique works well for the following figure, which shows the total population as a function of area for counties in the midwest. <img src="overlapping_points_files/figure-html/midwest-density-dots-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>If we want to emphasize the overall features of the distribution rather than the individual points, we can also show only the contour lines and leave out the individual points. <img src="overlapping_points_files/figure-html/midwest-density-only-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Finally, we can add a smoothing line to highlight the overall trend in the relationship between the two variables. <img src="overlapping_points_files/figure-html/midwest-density-smooth-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="d-histograms" class="section level2">
<h2><span class="header-section-number">8.4</span> 2d histograms</h2>
<p>None of the techniques discussed so far work very well when the majority of points falls into a small area relative to the overall extent of the data and the overall extent highlights important data features.</p>
<p>Consider the following figure, which shows the departure delay in minutes versus the flight departure time, for all flights departing Newark airport (EWR) in 2013.</p>
<p><img src="overlapping_points_files/figure-html/nycflights-points-1.png" width="576" style="display: block; margin: auto;" /> Even though we have made the points fairly transparent, the majority of the points just form a black band between 0 and 300 minutes departure delay. This black band obscures whether most flights depart approximately on time or with substantial delay (say 50 minutes or more). At the same time, the most delayed flights (with delays of 400 minutes or more) are barely visible due to the transparency of the points.</p>
<p>A good solution for this particular case is a 2d histogram, where we subdivide the entire x–y plane into small squares, count how many observations fall into each square, and then color the square by that count. The result is the following figure.</p>
<p><img src="overlapping_points_files/figure-html/nycflights-2d-bins-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>This figure clearly highlights several important features. First, the vast majority of departures during the day (6am to about 9pm) actually depart without delay or even early (negative delay). However, a modest number of departures has a substantial delay. Moreover, the later a plane departs in the day the more of a delay it can have. Importantly, here the departure time is the actual time of departure, not the scheduled time of departure. So this figure does not necessarily tell us that planes scheduled to depart early never experience delay. What it does tell us, though, is that if a plane departs early it either has little delay or, in very rare cases, a delay of around 900 minutes.</p>
<p>As an alternative to binning the data into squares, we can also bin into hexagons. This approach, first proposed by <span class="citation">Carr et al. (<a href="#ref-Carr-et-al-1987">1987</a>)</span>, has the advantage that the points in a hexagon are, on average, closer to the hexagon center than the points in an equal-area square are to the center of the square. As a consequence, the colored hexagon represents the data slightly more accurately than the colored square does. The following figure shows the same data with hexagon binning rather than square binning.</p>
<p><img src="overlapping_points_files/figure-html/nycflights-hex-bins-1.png" width="576" style="display: block; margin: auto;" /></p>

</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Carr-et-al-1987">
<p>Carr, D. B., R. J. Littlefield, W. L. Nicholson, and J. S. Littlefield. 1987. “Scatterplot Matrix Techniques for Large N.” <em>J. Am. Stat. Assoc.</em> 82: 424–36.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proportional-ink.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="directory-of-visualizations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
